# This is not yet used in production
process_redlinks:
  topic: mediawiki.revision_create
  retry_limit: 0
  match:
    rev_parent_id: undefined
  exec:
    method: post
    uri: '/sys/links/backlinks/{message.title}'
    body: '{{globals.message}}'

rerender_restbase:
  topic: resource_change
  match:
    meta:
      uri: '/https:\/\/[^\/]+\/wiki\/(?<title>.+)/'
    tags: [ 'change-prop', 'backlinks' ]
  exec:
    method: get
    uri: '{{hosts.restbase}}/page/html/{{match.meta.uri.title}}'
    headers:
      cache-control: no-cache
